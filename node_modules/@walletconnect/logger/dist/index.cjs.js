"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=require("pino"),c=require("@walletconnect/safe-json");function S(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function x(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,o.get?o:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var d=S(s),f=x(s);const v={level:"info"},l="custom_context",i=1e3*1024;var T=Object.defineProperty,E=(r,e,t)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,n=(r,e,t)=>E(r,typeof e!="symbol"?e+"":e,t);class z{constructor(e){n(this,"nodeValue"),n(this,"sizeInBytes"),n(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class L{constructor(e){n(this,"lengthInNodes"),n(this,"sizeInBytes"),n(this,"head"),n(this,"tail"),n(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new z(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}var j=Object.defineProperty,A=(r,e,t)=>e in r?j(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,a=(r,e,t)=>A(r,typeof e!="symbol"?e+"":e,t);class b{constructor(e,t=i){a(this,"logs"),a(this,"level"),a(this,"levelValue"),a(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=s.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new L(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===s.levels.values.error?console.error(e):t===s.levels.values.warn?console.warn(e):t===s.levels.values.debug?console.debug(e):t===s.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(c.safeJsonStringify({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new L(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(c.safeJsonStringify({extraMetadata:e})),new Blob(t,{type:"application/json"})}}var N=Object.defineProperty,k=(r,e,t)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,P=(r,e,t)=>k(r,typeof e!="symbol"?e+"":e,t);class ${constructor(e,t=i){P(this,"baseChunkLogger"),this.baseChunkLogger=new b(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),o=document.createElement("a");o.href=t,o.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)}}var D=Object.defineProperty,M=(r,e,t)=>e in r?D(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,G=(r,e,t)=>M(r,typeof e!="symbol"?e+"":e,t);class U{constructor(e,t=i){G(this,"baseChunkLogger"),this.baseChunkLogger=new b(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var V=Object.defineProperty,X=Object.defineProperties,Y=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,y=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e)=>{for(var t in e||(e={}))R.call(e,t)&&y(r,t,e[t]);if(p)for(var t of p(e))Z.call(e,t)&&y(r,t,e[t]);return r},u=(r,e)=>X(r,Y(e));function F(r){return u(g({},r),{level:r?.level||v.level})}function O(r,e=l){return r[e]||""}function _(r,e,t=l){return r[t]=e,r}function w(r,e=l){let t="";return typeof r.bindings>"u"?t=O(r,e):t=r.bindings().context||"",t}function C(r,e,t=l){const o=w(r,t);return o.trim()?`${o}/${e}`:e}function J(r,e,t=l){const o=C(r,e,t),h=r.child({context:o});return _(h,o,t)}function I(r){var e,t;const o=new $((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:d.default(u(g({},r.opts),{level:"trace",browser:u(g({},(t=r.opts)==null?void 0:t.browser),{write:h=>o.write(h)})})),chunkLoggerController:o}}function m(r){var e;const t=new U((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:d.default(u(g({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function q(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?I(r):m(r)}var B;const K=(B=f.default)!=null?B:f;exports.MAX_LOG_SIZE_IN_BYTES_DEFAULT=i,exports.PINO_CUSTOM_CONTEXT_KEY=l,exports.PINO_LOGGER_DEFAULTS=v,exports.formatChildLoggerContext=C,exports.generateChildLogger=J,exports.generateClientLogger=I,exports.generatePlatformLogger=q,exports.generateServerLogger=m,exports.getBrowserLoggerContext=O,exports.getDefaultLoggerOptions=F,exports.getLoggerContext=w,exports.pino=K,exports.setBrowserLoggerContext=_;
//# sourceMappingURL=index.cjs.js.map
