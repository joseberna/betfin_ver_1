(function(g,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(g=typeof globalThis<"u"?globalThis:g||self,p(g["@walletconnect/logger"]={}))})(this,function(g){"use strict";function p(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}function te(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var re=ne;function ne(e,t,r){var n=r&&r.stringify||te,s=1;if(typeof e=="object"&&e!==null){var a=t.length+s;if(a===1)return e;var c=new Array(a);c[0]=n(e);for(var d=1;d<a;d++)c[d]=n(t[d]);return c.join(" ")}if(typeof e!="string")return e;var i=t.length;if(i===0)return e;for(var u="",f=1-s,l=-1,S=e&&e.length||0,o=0;o<S;){if(e.charCodeAt(o)===37&&o+1<S){switch(l=l>-1?l:0,e.charCodeAt(o+1)){case 100:case 102:if(f>=i||t[f]==null)break;l<o&&(u+=e.slice(l,o)),u+=Number(t[f]),l=o+2,o++;break;case 105:if(f>=i||t[f]==null)break;l<o&&(u+=e.slice(l,o)),u+=Math.floor(Number(t[f])),l=o+2,o++;break;case 79:case 111:case 106:if(f>=i||t[f]===void 0)break;l<o&&(u+=e.slice(l,o));var h=typeof t[f];if(h==="string"){u+="'"+t[f]+"'",l=o+2,o++;break}if(h==="function"){u+=t[f].name||"<anonymous>",l=o+2,o++;break}u+=n(t[f]),l=o+2,o++;break;case 115:if(f>=i)break;l<o&&(u+=e.slice(l,o)),u+=String(t[f]),l=o+2,o++;break;case 37:l<o&&(u+=e.slice(l,o)),u+="%",l=o+2,o++,f--;break}++f}++o}return l===-1?e:(l<S&&(u+=e.slice(l)),u)}const x=re;var v=b;const _=ge().console||{},ie={mapHttpRequest:C,mapHttpResponse:C,wrapRequestSerializer:N,wrapResponseSerializer:N,wrapErrorSerializer:N,req:C,res:C,err:ue};function se(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function b(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=e.browser.write||_;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=se(e.browser.serialize,n);let a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);const c=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");const d=e.level||"info",i=Object.create(r);i.log||(i.log=z),Object.defineProperty(i,"levelVal",{get:f}),Object.defineProperty(i,"level",{get:l,set:S});const u={transmit:t,serialize:s,asObject:e.browser.asObject,levels:c,timestamp:ce(e)};i.levels=b.levels,i.level=d,i.setMaxListeners=i.getMaxListeners=i.emit=i.addListener=i.on=i.prependListener=i.once=i.prependOnceListener=i.removeListener=i.removeAllListeners=i.listeners=i.listenerCount=i.eventNames=i.write=i.flush=z,i.serializers=n,i._serialize=s,i._stdErrSerialize=a,i.child=o,t&&(i._logEvent=P());function f(){return this.level==="silent"?1/0:this.levels.values[this.level]}function l(){return this._level}function S(h){if(h!=="silent"&&!this.levels.values[h])throw Error("unknown level "+h);this._level=h,L(u,i,"error","log"),L(u,i,"fatal","error"),L(u,i,"warn","error"),L(u,i,"info","log"),L(u,i,"debug","log"),L(u,i,"trace","log")}function o(h,A){if(!h)throw new Error("missing bindings for child Pino");A=A||{},s&&h.serializers&&(A.serializers=h.serializers);const Q=A.serializers;if(s&&Q){var B=Object.assign({},n,Q),W=e.browser.serialize===!0?Object.keys(B):s;delete h.serializers,E([h],W,B,this._stdErrSerialize)}function ee(m){this._childLevel=(m._childLevel|0)+1,this.error=w(m,h,"error"),this.fatal=w(m,h,"fatal"),this.warn=w(m,h,"warn"),this.info=w(m,h,"info"),this.debug=w(m,h,"debug"),this.trace=w(m,h,"trace"),B&&(this.serializers=B,this._serialize=W),t&&(this._logEvent=P([].concat(m._logEvent.bindings,h)))}return ee.prototype=this,new ee(this)}return i}b.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},b.stdSerializers=ie,b.stdTimeFunctions=Object.assign({},{nullTime:$,epochTime:V,unixTime:fe,isoTime:he});function L(e,t,r,n){const s=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?z:s[r]?s[r]:_[r]||_[n]||z,oe(e,t,r)}function oe(e,t,r){!e.transmit&&t[r]===z||(t[r]=function(n){return function(){const a=e.timestamp(),c=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_?_:this;for(var i=0;i<c.length;i++)c[i]=arguments[i];if(e.serialize&&!e.asObject&&E(c,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(d,le(this,r,c,a)):n.apply(d,c),e.transmit){const u=e.transmit.level||t.level,f=b.levels.values[u],l=b.levels.values[r];if(l<f)return;ae(this,{ts:a,methodLevel:r,methodValue:l,transmitLevel:u,transmitValue:b.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},c)}}}(t[r]))}function le(e,t,r,n){e._serialize&&E(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const c={};n&&(c.time=n),c.level=b.levels.values[t];let d=(e._childLevel|0)+1;if(d<1&&(d=1),a!==null&&typeof a=="object"){for(;d--&&typeof s[0]=="object";)Object.assign(c,s.shift());a=s.length?x(s.shift(),s):void 0}else typeof a=="string"&&(a=x(s.shift(),s));return a!==void 0&&(c.msg=a),c}function E(e,t,r,n){for(const s in e)if(n&&e[s]instanceof Error)e[s]=b.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s]))for(const a in e[s])t&&t.indexOf(a)>-1&&a in r&&(e[s][a]=r[a](e[s][a]))}function w(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var s=1;s<n.length;s++)n[s]=arguments[s-1];return e[r].apply(this,n)}}function ae(e,t,r){const n=t.send,s=t.ts,a=t.methodLevel,c=t.methodValue,d=t.val,i=e._logEvent.bindings;E(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=r.filter(function(u){return i.indexOf(u)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=c,n(a,e._logEvent,d),e._logEvent=P(i)}function P(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ue(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)t[r]===void 0&&(t[r]=e[r]);return t}function ce(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?$:V}function C(){return{}}function N(e){return e}function z(){}function $(){return!1}function V(){return Date.now()}function fe(){return Math.round(Date.now()/1e3)}function he(){return new Date(Date.now()).toISOString()}function ge(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}var de=p({__proto__:null,default:v},[v]);const D={level:"info"},O="custom_context",T=1e3*1024;var ve=Object.defineProperty,be=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>be(e,typeof t!="symbol"?t+"":t,r);class ye{constructor(t){y(this,"nodeValue"),y(this,"sizeInBytes"),y(this,"next"),this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class M{constructor(t){y(this,"lengthInNodes"),y(this,"sizeInBytes"),y(this,"head"),y(this,"tail"),y(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new ye(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}}const me=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r);function G(e){return typeof e=="string"?e:me(e)||""}var Le=Object.defineProperty,we=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t,r)=>we(e,typeof t!="symbol"?t+"":t,r);class U{constructor(t,r=T){j(this,"logs"),j(this,"level"),j(this,"levelValue"),j(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=v.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new M(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===v.levels.values.error?console.error(t):r===v.levels.values.warn?console.warn(t):r===v.levels.values.debug?console.debug(t):r===v.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(G({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new M(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(G({extraMetadata:t})),new Blob(r,{type:"application/json"})}}var Oe=Object.defineProperty,pe=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t,r)=>pe(e,typeof t!="symbol"?t+"":t,r);class ze{constructor(t,r=T){_e(this,"baseChunkLogger"),this.baseChunkLogger=new U(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}var Se=Object.defineProperty,Ee=(e,t,r)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t,r)=>Ee(e,typeof t!="symbol"?t+"":t,r);class Te{constructor(t,r=T){Ce(this,"baseChunkLogger"),this.baseChunkLogger=new U(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var je=Object.defineProperty,ke=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))Ae.call(t,r)&&R(e,r,t[r]);if(F)for(var r of F(t))Be.call(t,r)&&R(e,r,t[r]);return e},I=(e,t)=>ke(e,Ie(t));function Pe(e){return I(k({},e),{level:e?.level||D.level})}function X(e,t=O){return e[t]||""}function Y(e,t,r=O){return e[r]=t,e}function Z(e,t=O){let r="";return typeof e.bindings>"u"?r=X(e,t):r=e.bindings().context||"",r}function q(e,t,r=O){const n=Z(e,r);return n.trim()?`${n}/${t}`:t}function Ne(e,t,r=O){const n=q(e,t,r),s=e.child({context:n});return Y(s,n,r)}function J(e){var t,r;const n=new ze((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:v(I(k({},e.opts),{level:"trace",browser:I(k({},(r=e.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function H(e){var t;const r=new Te((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:v(I(k({},e.opts),{level:"trace"})),chunkLoggerController:r}}function xe(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?J(e):H(e)}var K;const $e=(K=v)!=null?K:de;g.MAX_LOG_SIZE_IN_BYTES_DEFAULT=T,g.PINO_CUSTOM_CONTEXT_KEY=O,g.PINO_LOGGER_DEFAULTS=D,g.formatChildLoggerContext=q,g.generateChildLogger=Ne,g.generateClientLogger=J,g.generatePlatformLogger=xe,g.generateServerLogger=H,g.getBrowserLoggerContext=X,g.getDefaultLoggerOptions=Pe,g.getLoggerContext=Z,g.pino=$e,g.setBrowserLoggerContext=Y,Object.defineProperty(g,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
